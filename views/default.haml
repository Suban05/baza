!!! 5
%html
  %head
    %title
      = title
    %meta{charset:'UTF-8'}
    %meta{name: 'viewport', content: 'width=device-width, initial-scale=1.0'}
    %link{href: 'https://cdn.jsdelivr.net/gh/yegor256/tacit@gh-pages/tacit-css.min.css', rel: 'stylesheet'}
    %link{href: 'https://cdn.jsdelivr.net/gh/yegor256/drops@gh-pages/drops.min.css', rel: 'stylesheet'}
    %link{href: iri.cut('/css/main.css'), rel: 'stylesheet'}
    %link{rel: 'shortcut icon', href: iri.cut('/svg/logo.svg')}
    :css
      section { width: 100%; margin: 0; }
      article { border: none; }
      article, header, footer { padding: 0; }
      header nav ul, footer nav ul { text-align: left; }
      footer { padding-top: 2em; font-size: 0.9em; color: gray; }
      .logo { width: 64px; height: 64px; }
  %body
    %section
      %header
        %nav
          %ul
            %li
              %a{href: iri.cut('/dash')}
                %img.logo{src: iri.cut('/svg/logo.svg'), alt: 'Logo'}
            %li
              %span{title: "Current user ##{the_human.id}"}
                = "@#{the_human.github}"
            %li
              %a{href: iri.cut('/tokens')}
                Tokens
            %li
              %a{href: iri.cut('/jobs')}
                Jobs
            %li
              %a{href: iri.cut('/account')}
                Account
            - if the_human.admin?
              %li
                %a{href: iri.cut('/push')}
                  Push
              %li
                %a{href: iri.cut('/sql')}
                  SQL
              %li
                %a{href: iri.cut('/gift')}
                  Gift
            %li
              %a{href: iri.cut('/logout')}
                Logout
      %article
        - if defined?(flash_msg) && !flash_msg.empty?
          %p{style: 'background-color:' + flash_color + ';color:white;padding:.1em .5em;border-radius:4px;width:100%;'}
            = flash_msg
        != yield
      %footer
        %nav
          %ul{style: 'font-family: monospace;'}
            %li
              %span{title: 'Currently deployed version'}
                = Baza::VERSION
            %li{title: 'How many seconds it took to build this page'}
              = format('%.3f', Time.now - http_start)
            %li{title: 'The version of Ruby on the server'}
              = "rb:#{RUBY_VERSION}"
            %li{title: 'The version of PostgreSQL server and the size of the DB'}
              = "pg:#{settings.pgsql.version}/#{db_size}"
            %li{title: 'Your visible IP address'}
              = request.ip
          - if the_human.admin?
            %ul{style: 'font-family: monospace;'}
              %li
                %span{title: 'Pipeline status'}
                  = "pipeline:#{settings.pipeline}"
              %li
                %span{title: 'GC status'}
                  = "gc:#{settings.gc}"
