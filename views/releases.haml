%p
  The swarm
  = "#{releases.swarm.name} (##{releases.swarm.id})"
  has the following releases:
%table
  %colgroup
    -# ID
    %col{style: 'width: 4em;'}
    -# Head
    %col{style: 'width: 10em;'}
    -# Exit
    %col{style: 'width: 3em;'}
    -# Msec
    %col{style: 'width: 3em;'}
    -# Tail
    %col
    -# Secret
    %col{style: 'width: 15em;'}
    -# Created
    %col{style: 'width: 10em;'}
    -# Commands
    %col{style: 'width: 6em;'}
  %thead
    %tr
      %th
        = '#'
      %th
        Head
      %th
        Code
      %th
        Msec
      %th
        Tail
      %th
        Secret
      %th
        Created
      %th
  %tbody
  - paging(releases, offset:) do |r|
    %tr
      %td.ff
        = "##{r[:id]}"
      - if r[:head].nil?
        %td.orange{colspan: 3}
          Not yet
      - else
        %td.ff
          = r[:head][0..8]
        %td.ff.right
          = r[:code]
        %td.ff.right
          = r[:msec]
      %td
        %i.fa-regular.fa-eye{onclick: "$(this).parent().find('pre').show();", title: 'Click here to see the full deployment log', style: 'cursor: pointer;'}
        %pre{style: 'display: none;'}<>
          = r[:tail]
      %td
        != secret(r[:secret])
      %td
        != ago(r[:created])
      %td
        %a.ico{href: iri.cut('/swarms').append(releases.swarm.id).append('releases').append(r[:id]).append('stop'), title: "Stop release ##{r[:id]}", onclick: "return confirm('Are you sure you want to stop the release ##{r[:id]}?')"}
          %i.fa-brands.fa-docker
