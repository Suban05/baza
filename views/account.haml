%p
  Your balance:
  != zents(account.balance)

%p
  At the moment, it's impossible to add funds to the account,
  because the system is running in an experimental mode.
  Don't worry, we won't let you down:
  we will automatically top up your account by
  != zents(settings.donation_amount)
  when it runs out of funds (we will do it only once every
  = settings.donation_period
  days).

- bars = account.bars
- unless bars.empty?
  - bars.each { |b| b[:max] = b[:debit] > b[:credit] ? b[:debit] : b[:credit] }
  - max = bars.map { |b| b[:max] }.max
  %p
    Currently, we charge
    != zents(the_human.price * 1000)
    per second of our server time.
    This is how much you've spent, per week (YY.WW):
  %p
    %div.bars
      - bars.each do |b|
        %div.week
          %div.both
            %div.credit{style: "height: #{100 * b[:credit] / max}%", title: usd(b[:credit])}
              != '&nbsp;'
            %div.debit{style: "height: #{100 * b[:debit] / max}%", title: usd(b[:debit])}
              != '&nbsp;'
          %div.legend{title: "Week ##{b[:week]}"}
            = b[:week]

%p
  Full list of receipts:
%table
  %colgroup
    -# ID
    %col{style: 'width: 4em;'}
    -# Job
    %col{style: 'width: 4em;'}
    -# USD
    %col{style: 'width: 9em;'}
    -# Summary
    %col
    -# Created
    %col{style: 'width: 10em;'}
  %thead
    %tr
      %th
        = '#'
      %th.right
        Job
      %th.right
        USD
      %th
        Summary
      %th
        Created
  %tbody
  - total = 0
  - max = 10
  - account.each(offset: offset) do |r|
    - total += 1
    - break if total > max
    %tr
      %td
        = "##{r.id}"
      %td.right
        - j = r.job_id
        - if j.nil?
          = 'â€”'
        - else
          %a{href: iri.cut('/jobs').append(j)}
            = "##{j}"
      %td.right.ff
        != zents(r.zents)
      %td
        = r.summary
      %td
        != ago(r.created)
%p
  - unless offset.zero?
    %a{href: iri.del(:offset)}
      Back
  - if total > max
    %a{href: iri.over(offset: offset + max)}
      More
