%form{method: 'post', action: iri.cut('/tokens/add')}
  %fieldset
    %input{ type: 'text', name: 'name', tabindex: 1, placeholder: 'Unique token name', size: 40, maxlength: 32, autofocus: true, required: true }
    %input{ type: 'submit', tabindex: 2, value: 'Add' }

- if tokens.empty?
  %p
    No tokens yet.
- else
  %p
    Full list of tokens:
  %table
    %colgroup
      %col
      %col{style: 'width: 26em;'}
      %col{style: 'width: 12em;'}
      %col{style: 'width: 4em;'}
      %col{style: 'width: 6em;'}
    %thead
      %tr
        %th
          Name
        %th
          Token
        %th
          Created
        %th.right
          Jobs
        %th
    %tbody
    - total = 0
    - max = 10
    - tokens.each(offset: offset) do |t|
      - total += 1
      - break if total > max
      %tr{class: t.active? ? '' : 'gray'}
        %td
          = t.name
        %td.ff
          = t.text
        %td
          = t.created.utc.iso8601
        %td.right
          = t.jobs_count
        %td
          - if t.active?
            %a{href: iri.cut('/tokens').append(t.id).append('deactivate')}
              ❌
          - else
            Inactive
  %p
    - unless offset.zero?
      %a{href: iri.del(:offset)}
        Back
    - if total > max
      %a{href: iri.over(offset: offset + max)}
        More
